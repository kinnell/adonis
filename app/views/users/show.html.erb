<% if current_user.admin? %>

<section id="main-content">
  <section class="wrapper">
    <h1 class="title"><i class="fa fa-user"></i> User: <%= @user.name %></h1>
    <hr>


    <div class="row">
    <div class="col-lg-12">
<section class="panel">

	<header class="panel-heading">Basic Profile</header>

	<div class="panel-body">


    <%= form_for(@user, :html => { :method => :put, :class => 'form-horizontal'}) do |f| %>

    		<!-- Prints Errors -->
          <% if @user.errors.any? %>
            <% @user.errors.full_messages.each do |msg| %>
                <script>$(document).ready(function () {
                  noty({text:'<%= msg %>', type: 'error', layout: 'topCenter', timeout: 10000, dismissQueue: true, animateOpen: {opacity: 'show'}});});
                </script>
            <% end %>               
          <% end %>


        <div class="form-group">
            <label class="col-lg-2 col-sm-2 control-label">Name:</label>
            <div class="col-lg-10">
                <%= f.text_field :name, class: "form-control" %>                 
            </div>
        </div>

        <div class="form-group">
            <label class="col-lg-2 col-sm-2 control-label">Email:</label>
            <div class="col-lg-10">
                <%= f.email_field :email, class: "form-control" %>                 
            </div>
        </div>
      
         <div class="form-group">
            <label class="col-lg-2 col-sm-2 control-label">Location:</label>
            <div class="col-lg-10">
                <%= f.select(:location, ["Westborough, MA", "New York City, NY", "Pleasanton, CA", "Alpharetta, GA", "Chicago, IL", "Remote"], {}, { :class => 'form-control m-bot15' }) %>                 
            </div>
        </div>


  	
      	<div class="form-group">
            <label class="col-lg-2 col-sm-2 control-label">Team:</label>
            <div class="col-lg-10">
                <%= f.collection_select(:team_id, Team.all, :id , :name, {:include_blank => true}, {:class => 'form-control m-bot15' }) %>                 
            </div>
        </div>

        <div class="form-group">
          <div class="col-lg-offset-2 col-lg-10">
              <label class="switch switch-primary">
                <%= f.check_box :visible, {:class => "switch-input"} %>
                <span class="switch-label" data-on="Yes" data-off="No"></span>
                <span class="switch-handle"></span>
              </label>
              Visible on Leaderboard?
          </div>
        </div>

        <div class="form-group">
          <div class="col-lg-offset-2 col-lg-10">
              <label class="switch switch-primary">

                <%= f.check_box :paid, {:class => "switch-input", :disabled => (@user == current_user)}  %>
                <span class="switch-label" data-on="Yes" data-off="No"></span>
                <span class="switch-handle"></span>
              </label>
              Paid?
          </div>
        </div>

        <div class="form-group">
          <div class="col-lg-offset-2 col-lg-10">
              <label class="switch switch-primary">
                <%= f.check_box :admin, {:class => "switch-input", :disabled => (@user == current_user)} %>
                <span class="switch-label" data-on="Yes" data-off="No"></span>
                <span class="switch-handle"></span>
              </label>
              Admin?
          </div>
        </div>
        
        <div class="form-group">
            <div class="col-lg-offset-2 col-lg-10">
                <%= f.submit "Update", class: "btn btn-primary" %>
            </div>
        </div>
	<% end %>   

   </div>
</section>
</div>
</div>


   <div class="row">
    <div class="col-lg-12">
      <section class="panel">
        
        <header class="panel-heading">Weigh-Ins</header>
        
        <table class="table table-bordered table-advance table-hover">
              
          <thead>
            <tr style="background-color: #eeeeee">
              <th>#</th>
              <th>Week #</th>
              <th style="text-align: left">Date</th>
              <th>Weight</th>
              <th>Total Change Since Start</th>
              <th>Weigh-In Type</th>
              <th>Actions</th>
            </tr>
          </thead>

          <tbody>
            <% @user.weighins.each do |weighin| %>
            <tr> 
                
                <td><%= weighin.weighinNum %></td>
                <td><%= "#{weighin.weighinWeek}" %></td>
                <td style="text-align: left"><%= weighin.printCreatedAt %></td>
                <td><%= weighin.weight %> lbs</td>                
                <td><%= weighin.printWeightTotalChange %></td>
                <td>
                  <% if weighin.verified? %>
                    <span class="label label-success label-mini">Verified</span>
                  <% else %>
                    <span class="label label-info label-mini">Personal</span>
                  <% end %>
                </td>
                <td>

                  <% if current_user.admin? %> 
                    <% if weighin.verified? %>
                        <%= link_to unverify_weighin_path(weighin), class: "btn-xs btn btn-success" do %><i class="fa fa-check-square-o"></i><% end %>
                    <% else %>
                        <%= link_to verify_weighin_path(weighin), class: "btn-xs btn btn-success" do %><i class="fa fa-square-o"></i><% end %>
                    <% end %>                
                    
                    <%= link_to edit_weighin_path(weighin), class: "btn-xs btn btn-info" do %><i class="fa fa-edit"></i><% end %>

                    <%= link_to weighin, class: "btn-xs btn btn-danger", method: :delete, data: { confirm: 'Are you sure?' } do %><i class="fa fa-trash-o "></i><% end %>
                  
                  <% else %>

                    <% unless weighin.verified? %>
                        <%= link_to weighin, class: "btn-xs btn btn-danger", method: :delete, data: { confirm: 'Are you sure?' } do %><i class="fa fa-trash-o "></i><% end %>
                    <% end %>

                  <% end %>
                  
                </td>

            </tr>
            <% end %>
          
          </tbody>

        </table>

      </section>
    </div>
  </div>



    </section>
  </section>



<% end %>







