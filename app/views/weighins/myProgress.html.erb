<%= render 'modalNew' %>
  
<section id="main-content">
  <section class="wrapper">
   
  <div class="alert alert-info"><center><b>The competition officially begins on Wednesday, January 8th, 2014!</b><br>
  You can enter your weight in today, but the first official (validated) weight on January 8th will be your official starting weight.</center></div>


  <h1 class="title">
    <i class="fa fa-bar-chart-o"></i> 
    My Progress
    <button class="btn btn-primary" style="float: right;" data-toggle="modal" data-target="#addWeighin"><span class="fa fa-plus"></span> Add a Weigh-In</button>
  </h1>

  <hr>

  <%= content_tag :div, "", id: "weight_chart", data: {weighins: current_user.weighins} %>

  <br>

  <div class="row">
    <div class="col-lg-12">
      <section class="panel">
        
        <header class="panel-heading">Your Weigh-Ins</header>
        
        <table class="table table-bordered table-advance table-hover">
              
          <thead>
            <tr style="background-color: #eeeeee">
              <th>#</th>
              <th>Week #</th>
              <th style="text-align: left">Date</th>
              <th>Weight</th>
              <th>Total Change Since Start</th>
              <th>Weigh-In Type</th>
              <th>Actions</th>
            </tr>
          </thead>

          <tbody>
            <% current_user.weighins.each do |weighin| %>
            <tr> 
                
                <td><%= weighin.weighinNum %></td>
                <td><%= "#{weighin.weighinWeek}" %></td>
                <td style="text-align: left"><%= weighin.printCreatedAt %></td>
                <td><%= weighin.weight %> lbs</td>                
                <td><%= weighin.printWeightTotalChange %></td>
                <td>
                  <% if weighin.verified? %>
                    <span class="label label-success label-mini">Verified</span>
                  <% else %>
                    <span class="label label-info label-mini">Personal</span>
                  <% end %>
                </td>
                <td>

                  <% if current_user.admin? %> 
                    <% if weighin.verified? %>
                        <%= link_to unverify_weighin_path(weighin), class: "btn-xs btn btn-success" do %><i class="fa fa-check-square-o"></i><% end %>
                    <% else %>
                        <%= link_to verify_weighin_path(weighin), class: "btn-xs btn btn-success" do %><i class="fa fa-square-o"></i><% end %>
                    <% end %>                
                    
                    <%= link_to edit_weighin_path(weighin), class: "btn-xs btn btn-info" do %><i class="fa fa-edit"></i><% end %>

                    <%= link_to weighin, class: "btn-xs btn btn-danger", method: :delete, data: { confirm: 'Are you sure?' } do %><i class="fa fa-trash-o "></i><% end %>
                  
                  <% else %>

                    <% unless weighin.verified? %>
                        <%= link_to weighin, class: "btn-xs btn btn-danger", method: :delete, data: { confirm: 'Are you sure?' } do %><i class="fa fa-trash-o "></i><% end %>
                    <% end %>

                  <% end %>
                  
                </td>

            </tr>
            <% end %>
          
          </tbody>

        </table>

      </section>
    </div>
  </div>


  <br>


<% if false %>
<center><h2><b>Percent Change from Initial Weigh-in</b></h2></center>
<%= content_tag :div, "", id: "percent_chart", data: {weighins: Weighin.allWeightPercentTotalChanges(current_user)} %>

<% end %>



        

  </section>
</section>




       











